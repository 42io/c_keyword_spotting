#!/bin/bash

set -e

cd "`dirname "${BASH_SOURCE[0]}"`"

mkdir -p ../../bin

gcc -Werror -Wall -Wextra -Wpedantic -Wno-sign-compare \
    -Dkiss_fft_scalar=double -Dc_speech_features_double \
    -I. -I../../lib/c_speech_features-0.4.8/ \
    -I../../lib/c_speech_features-0.4.8/kiss_fft130/ \
    ../../lib/c_speech_features-0.4.8/c_speech_features.c \
    ../../lib/c_speech_features-0.4.8/kiss_fft130/kiss_fft.c \
    ../../lib/c_speech_features-0.4.8/kiss_fft130/tools/kiss_fftr.c \
    -o ../../bin/fe main.c fe.c -lm

# python_speech_features/example.py
# python -c '
# import sys
# from python_speech_features import mfcc
# import scipy.io.wavfile as wav
# (rate,sig) = wav.read(sys.argv[1])
# mfcc_feat = mfcc(sig,rate,winlen=0.05,winstep=0.02,nfft=1024)
# mfcc_min = min(val for sublist in mfcc_feat for val in sublist)
# mfcc_max = max(val for sublist in mfcc_feat for val in sublist)
# for a in mfcc_feat:
#   print " ".join("%.5f" % ((x-mfcc_min)/(mfcc_max-mfcc_min)) for x in a)
# ' src/features/test/backward_0d82fd99_nohash_0.wav

TEST="$(cat <<-EOF
0.65899 0.31490 0.47294 0.47815 0.48424 0.51998 0.45106 0.58516 0.52435 0.60555 0.51939 0.52210 0.48404
0.65844 0.31619 0.44391 0.48265 0.50031 0.56716 0.53853 0.61002 0.56527 0.62136 0.54342 0.57834 0.50714
0.65828 0.31066 0.43627 0.48711 0.50611 0.56871 0.54956 0.60502 0.56486 0.66338 0.57329 0.66146 0.59256
0.65850 0.31876 0.43356 0.47293 0.47600 0.57824 0.55912 0.63282 0.56538 0.65479 0.54932 0.66081 0.55461
0.65832 0.33070 0.45400 0.48634 0.47381 0.56168 0.54176 0.60937 0.56194 0.66420 0.57804 0.68763 0.54905
0.65983 0.31786 0.47103 0.51866 0.49745 0.53792 0.49442 0.60224 0.51130 0.61008 0.55248 0.66220 0.57140
0.65947 0.32449 0.48249 0.53777 0.53587 0.59928 0.53423 0.58913 0.53010 0.57852 0.51714 0.60299 0.55724
0.65911 0.32984 0.46794 0.51374 0.53048 0.60102 0.54366 0.60844 0.55975 0.54240 0.46526 0.59336 0.53076
0.65754 0.34170 0.46063 0.51296 0.50431 0.58328 0.54938 0.63038 0.63184 0.57972 0.45228 0.57222 0.53248
0.65804 0.33008 0.47398 0.54133 0.51224 0.54585 0.52348 0.61848 0.61605 0.57941 0.48907 0.59722 0.56384
0.65937 0.31452 0.47738 0.55197 0.53048 0.58281 0.55750 0.55076 0.57600 0.57713 0.48186 0.60085 0.58070
0.65968 0.31089 0.48089 0.56188 0.55427 0.60484 0.54906 0.54856 0.54768 0.58392 0.49205 0.58387 0.57627
0.65948 0.31261 0.47691 0.54063 0.53440 0.57865 0.56288 0.57503 0.53702 0.55804 0.52953 0.59475 0.55462
0.65821 0.32362 0.47176 0.52829 0.53341 0.55363 0.51085 0.56037 0.51864 0.51817 0.54164 0.56782 0.54741
0.65919 0.30853 0.46173 0.53759 0.53221 0.54334 0.50510 0.60674 0.49252 0.54040 0.50177 0.54129 0.57719
0.65938 0.30978 0.45447 0.53600 0.51503 0.54865 0.54336 0.64494 0.53338 0.61706 0.49659 0.52376 0.60203
0.65864 0.31901 0.47282 0.53182 0.49259 0.54002 0.53861 0.61755 0.55067 0.64169 0.48458 0.52916 0.57556
0.65817 0.31229 0.44688 0.50945 0.52228 0.50807 0.49961 0.56017 0.52057 0.61108 0.53521 0.57294 0.50135
0.65887 0.31264 0.44452 0.48384 0.52268 0.52745 0.52993 0.56251 0.48828 0.56234 0.56723 0.63148 0.49985
0.65849 0.32962 0.45633 0.49579 0.53638 0.56876 0.56600 0.57737 0.47663 0.58069 0.57240 0.64668 0.50742
0.65793 0.34282 0.48072 0.48064 0.49483 0.49581 0.50235 0.56687 0.51081 0.64172 0.58245 0.67079 0.56731
0.65747 0.34025 0.47985 0.50412 0.47100 0.46309 0.46588 0.56870 0.54873 0.61085 0.59004 0.61941 0.50771
0.65854 0.33883 0.50153 0.54596 0.49477 0.52125 0.52775 0.61020 0.54607 0.57620 0.53529 0.55156 0.49420
0.67124 0.43974 0.44823 0.42148 0.59941 0.49677 0.61526 0.65299 0.52376 0.56961 0.53979 0.58672 0.53674
0.76543 0.65742 0.42748 0.22009 0.73054 0.11372 0.39255 0.67866 0.50533 0.43947 0.33774 0.37005 0.52519
0.79051 0.62171 0.37320 0.15781 0.74549 0.07542 0.26222 0.82854 0.37506 0.39085 0.35875 0.30067 0.57288
0.79915 0.60580 0.40689 0.32315 0.71870 0.22758 0.47439 0.83563 0.61034 0.42925 0.41362 0.51441 0.59852
0.80332 0.60848 0.38229 0.24117 0.80549 0.10126 0.44805 0.95601 0.49331 0.42901 0.40812 0.39062 0.60612
0.80131 0.60081 0.41070 0.29629 0.76606 0.12641 0.48920 0.96329 0.56303 0.39511 0.37649 0.40958 0.56806
0.79493 0.59477 0.42572 0.26045 0.76254 0.00000 0.36850 1.00000 0.47161 0.37269 0.35530 0.23820 0.53004
0.78028 0.63432 0.51075 0.33465 0.77564 0.05666 0.49364 0.99747 0.57786 0.34700 0.48884 0.42916 0.59108
0.75882 0.63944 0.47199 0.35916 0.76681 0.17221 0.42953 0.77372 0.58532 0.30656 0.47034 0.57282 0.57165
0.74615 0.58662 0.38222 0.30244 0.72070 0.26869 0.49593 0.91964 0.63937 0.25849 0.26404 0.51282 0.46926
0.72983 0.54969 0.41418 0.31025 0.59089 0.26163 0.48131 0.82552 0.58234 0.24855 0.28928 0.54416 0.53923
0.75535 0.72992 0.50588 0.05844 0.51210 0.19807 0.77502 0.55405 0.72074 0.40189 0.56258 0.52630 0.49658
0.75638 0.70863 0.47954 0.06585 0.45828 0.22128 0.76795 0.49560 0.70614 0.38008 0.56786 0.48264 0.46778
0.75668 0.69549 0.48218 0.06158 0.47326 0.26023 0.77245 0.51720 0.69298 0.40805 0.59788 0.48026 0.50397
0.75002 0.73090 0.63473 0.25456 0.58237 0.27705 0.60239 0.31725 0.55151 0.35902 0.57747 0.51744 0.56980
0.76246 0.78904 0.83829 0.23102 0.56187 0.12489 0.55749 0.30372 0.59690 0.42517 0.57354 0.55787 0.58871
0.76899 0.82453 0.87974 0.20587 0.54917 0.12508 0.59495 0.25679 0.60296 0.45783 0.61013 0.62672 0.58068
0.77114 0.76144 0.91068 0.25993 0.51089 0.16519 0.57735 0.32159 0.54606 0.47844 0.61576 0.68267 0.61943
0.76941 0.73397 0.81935 0.25973 0.54725 0.10290 0.55752 0.21646 0.52380 0.42107 0.57148 0.61347 0.54329
0.76507 0.73549 0.81404 0.25538 0.59070 0.16652 0.62031 0.17260 0.44453 0.39470 0.55270 0.57075 0.47542
0.75759 0.78001 0.84464 0.29449 0.65692 0.22209 0.65623 0.10981 0.41389 0.59020 0.63501 0.55769 0.40067
0.74842 0.76660 0.77949 0.38227 0.66900 0.31372 0.52952 0.14772 0.38216 0.56396 0.61866 0.45744 0.34800
0.73340 0.74360 0.75753 0.52557 0.64656 0.41293 0.49927 0.40045 0.38944 0.45596 0.55260 0.46736 0.42637
0.73578 0.74124 0.79856 0.61074 0.67536 0.44963 0.48217 0.44557 0.40994 0.39694 0.52371 0.41010 0.38040
0.73751 0.74836 0.81155 0.70104 0.60815 0.44838 0.46483 0.48540 0.45324 0.44732 0.45898 0.39021 0.36336
0.73434 0.74357 0.84034 0.75342 0.56241 0.43736 0.52811 0.50283 0.44997 0.53961 0.45829 0.37533 0.38889
EOF
)"

diff <(echo -e "${TEST}") <(../../bin/fe test/backward_0d82fd99_nohash_0.wav)

TEST="$(cat <<-EOF
0.76010 0.41868 0.70855 0.53116 0.66559 0.69331 0.63576 0.69886 0.55092 0.72180 0.63419 0.78657 0.62414
0.76002 0.41812 0.73918 0.57121 0.68818 0.69159 0.63918 0.70617 0.56698 0.72335 0.64543 0.82650 0.63289
0.74839 0.46491 0.65984 0.60222 0.65872 0.68898 0.68728 0.70525 0.65782 0.73272 0.65319 0.76277 0.63512
0.74836 0.47461 0.66575 0.61321 0.63950 0.67722 0.64851 0.74974 0.66145 0.71007 0.59376 0.76374 0.62289
0.74804 0.48537 0.66276 0.59296 0.63013 0.68604 0.64356 0.77123 0.64978 0.72849 0.65145 0.78456 0.64596
0.74709 0.48734 0.65903 0.60256 0.64900 0.67769 0.66927 0.72247 0.60743 0.75025 0.72875 0.79071 0.65157
0.74749 0.48721 0.65084 0.62109 0.67231 0.69095 0.67139 0.69623 0.60936 0.75313 0.68649 0.76244 0.64430
0.74724 0.46784 0.63040 0.60770 0.67612 0.70892 0.67757 0.68647 0.55314 0.73162 0.63840 0.74431 0.64684
0.74714 0.46888 0.64525 0.62286 0.70366 0.74052 0.69186 0.75010 0.58383 0.70859 0.63348 0.73266 0.63693
0.74705 0.46598 0.63812 0.61987 0.68278 0.72673 0.70070 0.79052 0.62035 0.69358 0.56705 0.67589 0.64103
0.74621 0.45768 0.61974 0.61904 0.64936 0.68041 0.61413 0.72634 0.57009 0.66149 0.54230 0.64544 0.62938
0.74789 0.45029 0.62852 0.63071 0.67175 0.71333 0.63534 0.70769 0.58584 0.70280 0.60455 0.70339 0.62171
0.74865 0.44216 0.63378 0.63149 0.67140 0.71477 0.66227 0.74402 0.62377 0.72269 0.67513 0.74147 0.62592
0.74926 0.43866 0.64497 0.60882 0.63989 0.70861 0.68482 0.75034 0.62450 0.68478 0.68033 0.72463 0.60744
0.74882 0.44629 0.64745 0.60692 0.64378 0.73410 0.71033 0.74651 0.62690 0.70997 0.65216 0.68090 0.56954
0.74802 0.46800 0.65314 0.63986 0.65391 0.75760 0.70383 0.70622 0.56936 0.68443 0.60377 0.70820 0.63080
0.74678 0.47622 0.64697 0.64909 0.67275 0.72040 0.67658 0.72696 0.62738 0.68749 0.63375 0.71593 0.63387
0.74634 0.46339 0.62330 0.62657 0.64464 0.67901 0.64748 0.73396 0.64205 0.72585 0.60610 0.74343 0.69602
0.74664 0.45884 0.60441 0.62524 0.63886 0.68431 0.67304 0.74427 0.63041 0.70496 0.60201 0.72381 0.64665
0.74652 0.47053 0.61763 0.64567 0.64383 0.68550 0.68621 0.73261 0.56232 0.67102 0.58325 0.72761 0.60532
0.74855 0.46910 0.64097 0.62751 0.63469 0.66629 0.68969 0.70809 0.58035 0.68457 0.57201 0.75373 0.61129
0.75302 0.43595 0.65419 0.59106 0.65633 0.68812 0.67537 0.69554 0.55320 0.75113 0.61512 0.80709 0.68239
0.75552 0.42663 0.69196 0.59278 0.67527 0.74567 0.69158 0.73628 0.57389 0.72815 0.65178 0.77523 0.70919
0.76102 0.40855 0.73054 0.54976 0.67870 0.72185 0.68023 0.71406 0.56661 0.72520 0.65575 0.74604 0.63875
0.77702 0.35465 0.76245 0.51021 0.69215 0.69336 0.60413 0.73145 0.54795 0.77153 0.70757 0.66238 0.63265
0.79182 0.34136 0.70758 0.50263 0.64238 0.65049 0.58745 0.70738 0.57706 0.70100 0.58693 0.74782 0.68937
0.79439 0.37883 0.63064 0.48741 0.63123 0.59401 0.61349 0.80108 0.66836 0.74938 0.55051 0.65406 0.61705
0.80183 0.64134 0.79222 0.62648 0.42845 0.29823 0.56026 0.59968 0.59542 0.73790 0.37113 0.58575 0.59930
0.81991 0.75638 0.68561 0.77893 0.22443 0.15698 0.84765 0.56885 0.63154 0.80714 0.36456 0.65567 0.74174
0.82380 0.81848 0.64696 0.80713 0.19370 0.10906 0.94345 0.47658 0.62133 0.79795 0.40984 0.67728 0.69162
0.82200 0.79455 0.73468 0.85500 0.11731 0.09914 0.91228 0.53958 0.56655 0.77555 0.43481 0.65930 0.69493
0.81638 0.83219 0.69419 0.78018 0.27179 0.19840 0.81958 0.36763 0.51633 0.79399 0.40898 0.66161 0.72476
0.81483 0.81614 0.77454 0.81025 0.26369 0.10007 0.79192 0.40985 0.44740 0.77543 0.39969 0.62500 0.73103
0.81350 0.82644 0.70733 0.73317 0.32977 0.11481 0.74768 0.42454 0.45887 0.79017 0.44455 0.59386 0.70570
0.81039 0.81682 0.76919 0.76914 0.23113 0.00000 0.80249 0.61923 0.44079 0.81566 0.51744 0.58075 0.64978
0.80714 0.80735 0.67049 0.70120 0.33519 0.04479 0.73711 0.75819 0.48335 0.79859 0.58786 0.62245 0.62980
0.80395 0.81458 0.63922 0.58227 0.41785 0.16032 0.68132 1.00000 0.51381 0.55503 0.63105 0.78188 0.74304
0.79935 0.80504 0.64532 0.41560 0.56644 0.33712 0.64409 0.97394 0.63046 0.43209 0.63438 0.77157 0.77065
0.79726 0.79036 0.63484 0.29189 0.63143 0.57038 0.68441 0.78501 0.71317 0.56486 0.62799 0.69708 0.74227
0.79583 0.77403 0.62508 0.25139 0.67931 0.65690 0.66372 0.62285 0.71381 0.76354 0.72734 0.61620 0.68070
0.79722 0.77345 0.61043 0.20416 0.71079 0.67130 0.61157 0.56825 0.74389 0.83051 0.79133 0.59988 0.62885
0.79241 0.74774 0.62891 0.22741 0.74892 0.65097 0.58087 0.54301 0.74833 0.89743 0.82162 0.54540 0.62752
0.78814 0.71870 0.61663 0.28117 0.78150 0.67715 0.56732 0.55908 0.75107 0.91559 0.77735 0.46845 0.61793
0.77726 0.65773 0.58969 0.40366 0.78527 0.77827 0.57584 0.59629 0.78796 0.92319 0.67537 0.46428 0.56603
0.76583 0.57417 0.51567 0.48216 0.73815 0.75126 0.53157 0.64946 0.78008 0.83456 0.51682 0.54731 0.54261
0.75893 0.52812 0.51942 0.55036 0.76184 0.75346 0.49359 0.56828 0.68116 0.84959 0.64498 0.68171 0.59875
0.75041 0.50655 0.59872 0.58678 0.72278 0.73470 0.58977 0.66443 0.62351 0.78182 0.65883 0.73586 0.62845
0.74801 0.48336 0.63520 0.59151 0.66331 0.72130 0.65110 0.72988 0.64892 0.79111 0.63867 0.74584 0.59808
0.74505 0.49004 0.65682 0.58451 0.61930 0.70109 0.61556 0.69259 0.63154 0.76408 0.62745 0.74929 0.60191
EOF
)"

diff <(echo -e "${TEST}") <(../../bin/fe < test/four_370844f7_nohash_0.wav)

TEST="$(cat <<-EOF
0.61384 0.34627 0.42432 0.42467 0.49354 0.51008 0.53882 0.45107 0.37399 0.44917 0.38748 0.43802 0.43898
0.61319 0.35237 0.43394 0.43500 0.48128 0.51597 0.53037 0.49153 0.39430 0.43509 0.40105 0.42169 0.43584
0.61291 0.35322 0.44457 0.44266 0.46886 0.50859 0.50371 0.49468 0.40508 0.42183 0.38882 0.38473 0.44626
0.61368 0.34760 0.44520 0.45931 0.46930 0.51602 0.53250 0.52791 0.43670 0.44299 0.39767 0.42105 0.47669
0.61311 0.34793 0.44114 0.45641 0.46395 0.50600 0.54826 0.51814 0.45060 0.44975 0.38261 0.43977 0.46973
0.61338 0.33385 0.39996 0.48850 0.50343 0.52261 0.54130 0.52120 0.40097 0.45701 0.37799 0.44711 0.48138
0.61409 0.33348 0.40464 0.46730 0.50901 0.51265 0.53507 0.53915 0.41815 0.44986 0.36110 0.42120 0.45712
0.61438 0.32842 0.41994 0.47134 0.50488 0.52680 0.52820 0.52460 0.41303 0.42670 0.36382 0.43530 0.44658
0.61387 0.32570 0.41605 0.47138 0.48399 0.50891 0.51251 0.51508 0.43162 0.44771 0.40862 0.39809 0.43191
0.61456 0.33229 0.40543 0.47128 0.47581 0.51246 0.52350 0.53132 0.41160 0.45329 0.45794 0.42773 0.45160
0.61507 0.33715 0.40724 0.48272 0.46967 0.51270 0.51700 0.49297 0.40286 0.42738 0.42525 0.48324 0.50228
0.61616 0.40833 0.49631 0.53786 0.53014 0.57684 0.51052 0.41684 0.36527 0.35232 0.30199 0.38894 0.42500
0.62339 0.46768 0.57003 0.58997 0.57043 0.60780 0.52999 0.44157 0.38033 0.39560 0.34122 0.40868 0.43583
0.62968 0.46850 0.58292 0.63210 0.64316 0.63227 0.59256 0.49363 0.37885 0.42107 0.40505 0.46154 0.45753
0.63859 0.48702 0.59106 0.72505 0.60559 0.49701 0.52185 0.50188 0.42931 0.40338 0.45939 0.53023 0.45091
0.65940 0.52200 0.57883 0.95949 0.45279 0.17848 0.43609 0.39939 0.31655 0.36938 0.56620 0.57793 0.35265
0.66545 0.53354 0.56502 1.00000 0.38513 0.16296 0.47861 0.35854 0.28576 0.31194 0.55273 0.56779 0.31034
0.66613 0.54503 0.56554 0.99367 0.37146 0.18078 0.51347 0.34178 0.23193 0.30374 0.57954 0.59942 0.32485
0.66039 0.43563 0.70029 0.89361 0.42226 0.44908 0.24683 0.53891 0.08535 0.36715 0.58717 0.42594 0.51369
0.69335 0.25635 0.77341 0.72229 0.25245 0.78614 0.24503 0.40958 0.44128 0.31162 0.61016 0.47231 0.52695
0.69820 0.05285 0.72143 0.69293 0.25147 0.81988 0.37696 0.40663 0.61834 0.26314 0.44526 0.53345 0.52137
0.69960 0.06159 0.64015 0.61150 0.23189 0.80078 0.36311 0.37867 0.73003 0.35649 0.39943 0.51025 0.52659
0.69297 0.05921 0.55890 0.60526 0.27984 0.75076 0.39831 0.35018 0.82625 0.44312 0.34402 0.52312 0.53115
0.68530 0.19155 0.57333 0.62460 0.23449 0.68793 0.31041 0.21938 0.76388 0.50095 0.30865 0.50516 0.52103
0.67127 0.42180 0.56490 0.62936 0.09796 0.45864 0.15799 0.16790 0.73517 0.55172 0.42974 0.40478 0.43088
0.66887 0.51636 0.58786 0.48515 0.00000 0.58805 0.28995 0.25507 0.64405 0.65644 0.46800 0.43208 0.38801
0.66997 0.58238 0.59968 0.39588 0.03332 0.49501 0.27072 0.35889 0.59492 0.80157 0.40856 0.39045 0.27385
0.66774 0.62239 0.55173 0.31264 0.13255 0.42829 0.38815 0.47467 0.54603 0.72350 0.47062 0.38326 0.28636
0.66129 0.60129 0.53186 0.31084 0.18947 0.42950 0.37106 0.46788 0.57624 0.72253 0.53242 0.33715 0.29410
0.64368 0.54952 0.50344 0.34271 0.26898 0.48021 0.37492 0.45156 0.55661 0.72253 0.60030 0.34398 0.36719
0.63344 0.49320 0.47315 0.34363 0.34583 0.48866 0.42980 0.41109 0.54002 0.73246 0.70791 0.49561 0.41259
0.62549 0.42037 0.41783 0.35911 0.38152 0.51496 0.46489 0.41535 0.49236 0.65178 0.58482 0.41788 0.34853
0.62256 0.35934 0.38155 0.38838 0.42654 0.55517 0.49592 0.46125 0.46923 0.56117 0.48816 0.39415 0.39524
0.62199 0.33750 0.39180 0.43832 0.45036 0.55822 0.48215 0.44923 0.42739 0.53366 0.45956 0.38133 0.44426
0.62091 0.33607 0.42591 0.47252 0.44275 0.51863 0.50487 0.48471 0.41989 0.49739 0.38704 0.35915 0.47217
0.61954 0.34573 0.41099 0.42043 0.44106 0.51687 0.56122 0.52686 0.42903 0.48164 0.39504 0.35955 0.45092
0.62051 0.34107 0.40861 0.43185 0.47293 0.50445 0.56556 0.53274 0.46123 0.45647 0.40661 0.41207 0.47205
0.62067 0.33411 0.41142 0.44251 0.47570 0.50398 0.57021 0.52562 0.45618 0.45399 0.39912 0.45467 0.51354
0.62040 0.33606 0.40672 0.43110 0.46571 0.49111 0.56159 0.50561 0.43946 0.46922 0.40064 0.40272 0.45342
0.62000 0.33796 0.41156 0.44137 0.46263 0.50257 0.56477 0.55207 0.43195 0.51069 0.42964 0.39408 0.45170
0.61962 0.34128 0.41849 0.46194 0.41919 0.48848 0.54291 0.54332 0.41300 0.48412 0.47094 0.38769 0.47427
0.61970 0.33807 0.42610 0.46943 0.44104 0.52934 0.55330 0.49127 0.38043 0.42683 0.43696 0.41882 0.48203
0.61938 0.33871 0.41975 0.44837 0.47667 0.53644 0.55435 0.50011 0.43161 0.46476 0.44253 0.42333 0.46001
0.62021 0.33890 0.40732 0.42626 0.50110 0.52935 0.51821 0.52732 0.46615 0.44855 0.39500 0.41934 0.46998
0.62087 0.33534 0.42879 0.41815 0.51932 0.53857 0.49091 0.55335 0.45540 0.44814 0.41434 0.45531 0.51389
0.62070 0.34678 0.43674 0.40663 0.47581 0.53487 0.49793 0.55432 0.46081 0.45348 0.40357 0.44735 0.47989
0.61963 0.35516 0.44737 0.42025 0.45943 0.50481 0.52612 0.53984 0.44762 0.44546 0.36842 0.39964 0.42819
0.61956 0.35595 0.44258 0.44016 0.45913 0.50602 0.52052 0.49950 0.43291 0.47672 0.40141 0.38696 0.39546
0.61772 0.35462 0.44447 0.46858 0.45106 0.48334 0.53169 0.48866 0.38091 0.47922 0.41436 0.40639 0.42558
EOF
)"

diff <(echo -e "${TEST}") <(../../bin/fe < test/visual_29dce108_nohash_0.wav)

TEST="$(cat <<-EOF
0.74121 0.57956 0.75110 0.67494 0.71805 0.66901 0.68426 0.66333 0.64278 0.61663 0.57867 0.61501 0.65270
0.74095 0.57758 0.75932 0.67446 0.70716 0.67108 0.71159 0.69201 0.62449 0.61189 0.57119 0.60572 0.65391
0.74186 0.56412 0.72980 0.71123 0.73545 0.70575 0.73411 0.68167 0.57203 0.63436 0.54602 0.60190 0.69181
0.82620 0.21995 0.93420 0.77774 0.43075 1.00000 0.40752 0.87990 0.49049 0.66540 0.65762 0.55973 0.68078
0.82622 0.21087 0.94337 0.79376 0.43173 0.98228 0.39763 0.87728 0.49558 0.67768 0.68151 0.58087 0.68880
0.78890 0.46336 0.73882 0.63823 0.58829 0.77540 0.53084 0.78003 0.57923 0.70901 0.62849 0.63101 0.68311
0.79585 0.38054 0.85679 0.57525 0.64649 0.79750 0.46496 0.82648 0.49899 0.81223 0.48685 0.76372 0.51855
0.79669 0.37314 0.90247 0.58529 0.62897 0.79890 0.44439 0.82938 0.50829 0.84736 0.53408 0.79913 0.48123
0.79653 0.37530 0.91092 0.59061 0.63544 0.81130 0.47348 0.80246 0.45042 0.84591 0.52803 0.81813 0.50984
0.77141 0.44454 0.81067 0.68395 0.65867 0.86587 0.52638 0.74392 0.47449 0.75932 0.56011 0.70915 0.62061
0.76995 0.46602 0.77044 0.72860 0.64621 0.87948 0.53665 0.76973 0.45424 0.74691 0.52538 0.60972 0.75126
0.76993 0.46621 0.76781 0.73070 0.63652 0.87474 0.51297 0.78131 0.50548 0.76857 0.51954 0.58349 0.76565
0.75399 0.51332 0.75014 0.70093 0.65490 0.86889 0.57735 0.70142 0.58769 0.71747 0.53538 0.61704 0.67896
0.75061 0.53651 0.74462 0.66651 0.70801 0.81361 0.57218 0.68668 0.55724 0.72364 0.50874 0.63259 0.70953
0.74492 0.58091 0.73916 0.64501 0.64883 0.73704 0.63900 0.69689 0.61844 0.67669 0.49446 0.55812 0.63786
0.75380 0.68797 0.71483 0.50465 0.45550 0.63446 0.69119 0.75210 0.65475 0.60253 0.54459 0.54372 0.64033
0.75633 0.68074 0.74525 0.47949 0.46122 0.59109 0.73440 0.72166 0.66392 0.57763 0.60269 0.51553 0.65398
0.76525 0.65900 0.79489 0.54675 0.51478 0.61476 0.59465 0.74839 0.58186 0.60797 0.53411 0.64736 0.64734
0.78416 0.62574 0.79195 0.63457 0.47735 0.58681 0.52835 0.71947 0.38793 0.70354 0.63083 0.73626 0.55919
0.81037 0.60202 0.72018 0.66741 0.51858 0.79809 0.53905 0.87143 0.41928 0.78295 0.57500 0.69956 0.60738
0.81127 0.60089 0.69764 0.66778 0.52794 0.80030 0.52404 0.85106 0.42174 0.78504 0.55947 0.68795 0.61899
0.83997 0.71892 0.60872 0.64911 0.11458 0.60209 0.74785 0.80048 0.53381 0.75241 0.66911 0.80527 0.65087
0.84919 0.75424 0.47797 0.70402 0.04926 0.63316 0.75831 0.69779 0.57669 0.66025 0.68520 0.73593 0.64079
0.85279 0.74574 0.50426 0.71836 0.01243 0.65022 0.89708 0.73653 0.56585 0.68031 0.73313 0.73189 0.62257
0.85348 0.72447 0.45320 0.66397 0.00000 0.64146 0.94850 0.69448 0.58310 0.63038 0.68032 0.70497 0.57342
0.85330 0.71885 0.45658 0.61230 0.15099 0.68149 0.93014 0.63124 0.64915 0.60900 0.64995 0.70977 0.56726
0.85177 0.72379 0.44050 0.62063 0.13482 0.68048 0.96537 0.63030 0.56677 0.61865 0.67088 0.69300 0.46588
0.84883 0.70363 0.44993 0.59723 0.22486 0.76241 0.81220 0.63025 0.50932 0.74177 0.62164 0.65598 0.44513
0.84431 0.68540 0.48765 0.57468 0.30557 0.84629 0.67869 0.62516 0.58617 0.78107 0.64635 0.62746 0.45764
0.84211 0.65512 0.48776 0.63724 0.33081 0.85326 0.52852 0.64925 0.63593 0.78833 0.61978 0.58085 0.47430
0.83910 0.63864 0.49688 0.71924 0.37314 0.78177 0.40615 0.70400 0.73253 0.77869 0.59474 0.56801 0.50810
0.83943 0.62356 0.48051 0.79780 0.41487 0.65845 0.28751 0.74659 0.83406 0.76632 0.61012 0.64754 0.58703
0.83766 0.63323 0.44052 0.86544 0.39149 0.63050 0.20068 0.71724 0.85389 0.69228 0.67134 0.68184 0.68968
0.83612 0.63967 0.43607 0.89979 0.41348 0.60807 0.10248 0.63760 0.74426 0.67321 0.64753 0.69734 0.71048
0.82158 0.67910 0.51709 0.86141 0.56056 0.60778 0.11160 0.70146 0.56788 0.75278 0.59307 0.64223 0.78074
0.80763 0.67740 0.55444 0.83273 0.58311 0.65163 0.16118 0.64513 0.60600 0.76751 0.58349 0.61573 0.78241
0.78548 0.69330 0.69587 0.74823 0.65549 0.68752 0.24111 0.64824 0.55190 0.72334 0.58011 0.66493 0.72430
0.75860 0.63489 0.72980 0.74065 0.62568 0.61581 0.51584 0.66817 0.68926 0.70415 0.63743 0.67003 0.65053
0.75345 0.57196 0.67806 0.72157 0.65236 0.60443 0.63487 0.61416 0.70635 0.66908 0.60989 0.69401 0.61499
0.75792 0.51665 0.71440 0.74445 0.66599 0.71787 0.67921 0.62284 0.69570 0.63524 0.62096 0.63431 0.60761
0.76350 0.48249 0.73531 0.75253 0.68489 0.76243 0.63440 0.66988 0.65758 0.62116 0.63162 0.61443 0.61709
0.76634 0.46847 0.72940 0.74471 0.71716 0.79140 0.61390 0.74116 0.63040 0.57005 0.61585 0.61164 0.63140
0.76859 0.46486 0.74538 0.74232 0.69426 0.81250 0.52284 0.74531 0.66712 0.59003 0.59531 0.63548 0.65714
0.77022 0.45942 0.74104 0.75221 0.63901 0.85297 0.47355 0.72693 0.68310 0.56326 0.61281 0.65982 0.62065
0.76835 0.48235 0.74280 0.75299 0.59825 0.93233 0.53078 0.68518 0.68429 0.56144 0.58322 0.67720 0.63517
0.76188 0.50151 0.69136 0.80935 0.59673 0.88148 0.69716 0.60896 0.65052 0.59428 0.52396 0.65493 0.68374
0.75718 0.53304 0.68037 0.80063 0.62140 0.80898 0.74643 0.56570 0.67584 0.69641 0.46106 0.63859 0.70683
0.75503 0.54653 0.68635 0.75883 0.62287 0.77476 0.73729 0.57198 0.67077 0.75657 0.44394 0.63470 0.79675
0.75080 0.54747 0.71305 0.75777 0.63790 0.75649 0.73951 0.62565 0.65305 0.72981 0.44630 0.62820 0.77195
EOF
)"

diff <(echo -e "${TEST}") <(../../bin/fe < test/five_879a2b38_nohash_0.wav)

TEST="$(cat <<-EOF
0.65862 0.61273 0.54321 0.54318 0.56373 0.58407 0.61179 0.60449 0.42194 0.48365 0.44807 0.58442 0.55075
0.65756 0.61392 0.53614 0.52475 0.54613 0.56309 0.53527 0.60027 0.54903 0.58186 0.44140 0.62789 0.60615
0.65846 0.63105 0.52645 0.51610 0.53502 0.58335 0.50658 0.60622 0.61294 0.61735 0.44923 0.55957 0.53027
0.66099 0.64791 0.51114 0.49654 0.52966 0.60837 0.51735 0.55507 0.57529 0.67438 0.44131 0.50933 0.50819
0.66098 0.63620 0.50871 0.49466 0.52619 0.60658 0.51214 0.53937 0.55168 0.68846 0.45152 0.48504 0.52248
0.65992 0.62549 0.49095 0.49518 0.52488 0.56855 0.51261 0.57422 0.50240 0.63120 0.47843 0.50668 0.48230
0.65840 0.60029 0.49006 0.46846 0.44489 0.54036 0.52907 0.60133 0.45177 0.53083 0.51272 0.56551 0.48475
0.65823 0.59575 0.49735 0.45329 0.44535 0.55497 0.55006 0.61705 0.50155 0.50755 0.49946 0.56512 0.50080
0.68794 0.39161 0.59069 0.45873 0.41041 0.71315 0.46524 0.69892 0.29441 0.61860 0.40591 0.51112 0.48409
0.69381 0.36883 0.54795 0.45494 0.28977 0.66960 0.56933 0.67365 0.45391 0.69771 0.37780 0.53631 0.45046
0.69453 0.37152 0.54623 0.44406 0.27944 0.64651 0.57981 0.68689 0.52504 0.76133 0.38038 0.56888 0.47111
0.68664 0.41619 0.57313 0.46648 0.31722 0.66091 0.57053 0.65482 0.61336 0.75815 0.34906 0.63196 0.44533
0.67830 0.45238 0.59062 0.46091 0.43303 0.73367 0.53117 0.59243 0.51301 0.71759 0.34293 0.64736 0.48832
0.67044 0.50060 0.58021 0.46226 0.44058 0.68827 0.54290 0.63952 0.38728 0.73087 0.41682 0.54948 0.41912
0.66428 0.54701 0.54215 0.48144 0.50600 0.62312 0.45596 0.60585 0.33126 0.68201 0.42306 0.40542 0.39423
0.67874 0.59985 0.39361 0.50143 0.57986 0.64006 0.53844 0.48118 0.30825 0.76369 0.46493 0.21143 0.27923
0.71137 0.55545 0.21210 0.50288 0.57106 0.80532 0.57301 0.23265 0.52931 0.67472 0.56431 0.34940 0.28124
0.73056 0.54009 0.17819 0.50624 0.44880 0.84988 0.75642 0.20448 0.45941 0.64819 0.66153 0.47962 0.49117
0.74121 0.52526 0.00000 0.46828 0.27542 0.77601 0.75295 0.26588 0.43643 0.60322 0.67622 0.24364 0.32630
0.75679 0.67030 0.16528 0.45026 0.38310 0.74929 0.89594 0.53689 0.63037 0.70663 0.62394 0.27653 0.28667
0.76966 0.70477 0.22732 0.39003 0.33458 0.64210 0.88196 0.52770 0.50930 0.79261 0.63455 0.29926 0.36854
0.77379 0.71752 0.22671 0.39613 0.33134 0.60399 0.91405 0.65341 0.54718 0.80811 0.64270 0.30605 0.37108
0.77527 0.70962 0.25159 0.39671 0.31238 0.54741 1.00000 0.81652 0.62131 0.82904 0.69185 0.37644 0.38751
0.77364 0.77964 0.28645 0.48006 0.27525 0.41001 0.95669 0.82656 0.56858 0.64058 0.66401 0.45611 0.41694
0.77300 0.75661 0.35048 0.44485 0.29677 0.41339 0.91699 0.79889 0.53086 0.65442 0.71346 0.45625 0.38603
0.76942 0.75537 0.40924 0.50405 0.26649 0.40843 0.86078 0.63997 0.47807 0.70831 0.77815 0.52862 0.36576
0.76401 0.81984 0.37368 0.61325 0.20051 0.40965 0.95221 0.54702 0.55565 0.73894 0.80128 0.66605 0.38774
0.75820 0.84492 0.45122 0.61707 0.13007 0.45392 0.93722 0.45736 0.55581 0.62355 0.71370 0.65647 0.39231
0.74880 0.82955 0.47839 0.64304 0.19376 0.43570 0.82950 0.39543 0.55855 0.49768 0.64357 0.66073 0.50077
0.74353 0.82386 0.51528 0.62614 0.19393 0.45253 0.74835 0.40704 0.53387 0.47959 0.66181 0.57522 0.44161
0.74348 0.65717 0.50982 0.53344 0.51649 0.63995 0.32222 0.56762 0.61053 0.54625 0.59566 0.45804 0.56373
0.75767 0.47424 0.59552 0.52991 0.58446 0.82693 0.21811 0.61393 0.66322 0.48688 0.67768 0.42370 0.61227
0.76258 0.36131 0.61300 0.52560 0.65951 0.87396 0.23425 0.62865 0.70734 0.51144 0.63502 0.45730 0.60648
0.76532 0.28084 0.68928 0.54546 0.69791 0.92937 0.26812 0.64439 0.67442 0.41233 0.50322 0.40502 0.55909
0.76300 0.23954 0.72280 0.52866 0.67685 0.87013 0.31868 0.62901 0.63029 0.41600 0.43390 0.45011 0.56200
0.76251 0.18700 0.71852 0.52199 0.64314 0.74743 0.29050 0.65670 0.71395 0.50962 0.42748 0.49358 0.59287
0.76330 0.16598 0.72704 0.52232 0.59853 0.69506 0.30726 0.62577 0.73137 0.53644 0.37452 0.44776 0.55773
0.76418 0.17445 0.73674 0.51143 0.55023 0.72947 0.35935 0.67377 0.72382 0.54607 0.50216 0.53819 0.56625
0.76535 0.07421 0.68951 0.53137 0.57884 0.81270 0.34950 0.73128 0.84253 0.54740 0.42303 0.48297 0.53002
0.76502 0.12624 0.72102 0.54248 0.54026 0.80429 0.25785 0.62533 0.70607 0.50357 0.50861 0.48989 0.51573
0.76088 0.17171 0.69167 0.52243 0.54295 0.81876 0.23501 0.56732 0.74551 0.55231 0.48887 0.47715 0.50921
0.75397 0.16432 0.64452 0.50402 0.58014 0.89844 0.22416 0.47573 0.73330 0.62752 0.53018 0.50399 0.50608
0.74500 0.16449 0.61644 0.48918 0.66549 0.92987 0.18970 0.42963 0.75316 0.66222 0.53330 0.50400 0.44586
0.73276 0.19865 0.62161 0.43417 0.70321 0.98608 0.19645 0.46978 0.72212 0.52287 0.53673 0.46527 0.43069
0.72469 0.26381 0.69959 0.39233 0.54672 0.98664 0.31037 0.47364 0.65852 0.60469 0.58552 0.41272 0.43463
0.71553 0.28820 0.74000 0.44111 0.50326 0.90677 0.34252 0.51947 0.65651 0.64256 0.58606 0.47557 0.49775
0.70490 0.33418 0.74350 0.42304 0.42287 0.80366 0.29322 0.45750 0.56202 0.54536 0.57118 0.38432 0.45799
0.69085 0.38720 0.72101 0.38980 0.42027 0.75602 0.30009 0.52736 0.48840 0.42567 0.47814 0.43109 0.47199
0.67784 0.46052 0.68935 0.36781 0.39701 0.75409 0.35343 0.70659 0.46334 0.39761 0.51502 0.42962 0.61677
EOF
)"

diff <(echo -e "${TEST}") <(../../bin/fe < test/house_a9ca1818_nohash_0.wav)

echo "Features extractor build OK!"